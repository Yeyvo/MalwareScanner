import {Component, OnInit} from '@angular/core';
import {FormBuilder, FormGroup, Validators} from "@angular/forms";
import {ActivatedRoute, Router} from "@angular/router";
import {SandboxService} from "./services/sandbox.service";
import {log} from "util";

@Component({
  selector: 'app-root',
  templateUrl: './app.component.html',
  styleUrls: ['./app.component.scss']
})
export class AppComponent implements OnInit{
  title = 'malware-scanner-web-app';

  display: boolean = false;
  newSandboxFormGroup: FormGroup;
  error:string;

  constructor(private _formBuilder: FormBuilder,
              private route: ActivatedRoute,
              private router: Router,
              private sandboxService: SandboxService) {
  }

  ngOnInit(): void {

    this.newSandboxFormGroup = this._formBuilder.group({
      url: ['', [Validators.required, Validators.minLength(8)]],
      // repass: ['', [Validators.required, Validators.minLength(8)]]//, this.checkPasswords
    });
  }

  showDialog() {
    this.display = true;
  }


  onSandboxCreationChange() {




    this.sandboxService.launchTest(this.newSandboxFormGroup.controls['url'].value);
    this.sandboxService.onInfo().subscribe((data: any) => console.log(data))

    // this.authService.changePassword(this.changePasswordFormGroup.controls['pass'].value).pipe(first())
    //   .subscribe({
    //     next: () => {
    //       this.displayChangePassword = false
    //       this.openVerification()
    //     },
    //     error: error => {
    //       this.errorChangePass = `error status : ${error.status} ${error.statusText}`;
    //     }
    //   });


  }

}
